<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/flame/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/flame/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/flame/images/favicon-16x16.png">
  <link rel="mask-icon" href="/flame/images/logo.svg" color="#222">

<link rel="stylesheet" href="/flame/css/main.css">


<link rel="stylesheet" href="/flame/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"flame-bcc.github.io","root":"/flame/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":260,"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="前言​	本文是对java中nio(non-blocking io)的总结:  网络服务的总结  Reactor模式  java.nio的api  代码实现">
<meta property="og:type" content="article">
<meta property="og:title" content="Java NIO">
<meta property="og:url" content="https://flame-bcc.github.io/flame/2021/10/23/java/java-nio-socket/index.html">
<meta property="og:site_name" content="flame">
<meta property="og:description" content="前言​	本文是对java中nio(non-blocking io)的总结:  网络服务的总结  Reactor模式  java.nio的api  代码实现">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://flame-bcc.github.io/flame/images/java/nio-network-service-classic-design.png">
<meta property="og:image" content="https://flame-bcc.github.io/flame/images/java/reactor-pattern-structure.png">
<meta property="og:image" content="https://flame-bcc.github.io/flame/images/java/reactor-pattern-general-collaborations.png">
<meta property="og:image" content="https://flame-bcc.github.io/flame/images/java/reactor-pattern-paper-collaboration-scenarios-one.png">
<meta property="og:image" content="https://flame-bcc.github.io/flame/images/java/reactor-pattern-paper-collaboration-scenarios-second.png">
<meta property="og:image" content="https://flame-bcc.github.io/flame/images/java/nio-reactor-single-thread-version.png">
<meta property="og:image" content="https://flame-bcc.github.io/flame/images/java/nio-reactor-worker-thread-pool-version.png">
<meta property="og:image" content="https://flame-bcc.github.io/flame/images/java/nio-reactor-multi-reactors-version.png">
<meta property="og:image" content="https://flame-bcc.github.io/flame/images/java/java-nio-buffer.png">
<meta property="article:published_time" content="2021-10-23T08:57:42.000Z">
<meta property="article:modified_time" content="2022-07-16T09:47:47.901Z">
<meta property="article:author" content="flame">
<meta property="article:tag" content="nio">
<meta property="article:tag" content="java">
<meta property="article:tag" content="socket">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://flame-bcc.github.io/flame/images/java/nio-network-service-classic-design.png">

<link rel="canonical" href="https://flame-bcc.github.io/flame/2021/10/23/java/java-nio-socket/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Java NIO | flame</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/flame/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">flame</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">路漫漫其修远兮 吾将上下而求索</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/flame/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/flame/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/flame/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/flame/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/flame/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/agui93" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://flame-bcc.github.io/flame/2021/10/23/java/java-nio-socket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/flame/images/avatar.jpeg">
      <meta itemprop="name" content="flame">
      <meta itemprop="description" content="读书百遍 其义自见">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="flame">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Java NIO
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-23 16:57:42" itemprop="dateCreated datePublished" datetime="2021-10-23T16:57:42+08:00">2021-10-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-16 17:47:47" itemprop="dateModified" datetime="2022-07-16T17:47:47+08:00">2022-07-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/flame/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/flame/categories/java/nio/" itemprop="url" rel="index"><span itemprop="name">nio</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/flame/categories/java/socket/" itemprop="url" rel="index"><span itemprop="name">socket</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/flame/categories/java/selector/" itemprop="url" rel="index"><span itemprop="name">selector</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>​	本文是对java中nio(non-blocking io)的总结:</p>
<ul>
<li><p>网络服务的总结</p>
</li>
<li><p>Reactor模式</p>
</li>
<li><p>java.nio的api</p>
</li>
<li><p>代码实现</p>
</li>
</ul>
<span id="more"></span>



<h2 id="NIO-新的还是非阻塞的"><a href="#NIO-新的还是非阻塞的" class="headerlink" title="NIO-新的还是非阻塞的"></a>NIO-新的还是非阻塞的</h2><blockquote>
<p>新的还是非阻塞的</p>
<p>NIO 最开始是新的输入&#x2F;输出（New Input&#x2F;Output）的英文缩写，但是，该Java API 已经出现足够长的时间 了，不再是“新的”了，因此，如今大多数的用户认为NIO 代表非阻塞 I&#x2F;O（Non-blocking I&#x2F;O），而阻塞I&#x2F;O（blocking I&#x2F;O）是旧的输入&#x2F;输出（old input&#x2F;output，OIO）。你也可能遇到它被称为普通I&#x2F;O（plain I&#x2F;O）的时候。</p>
</blockquote>
<p>java.nio.channels.Selector是 Java 的非阻塞 I&#x2F;O 实现的关键。</p>
<p>它使用了事件通知 API 以确定在一组非阻塞套接字中有哪些已经就绪能够进 行 I&#x2F;O 相关的操作。</p>
<p>使用较少的线程便可以处理许多连接，因此也减少了内存管理和上下文切换所带来开销。</p>
<p>当没有 I&#x2F;O 操作需要处理的时候，线程也可以被用于其他任务。</p>
<h2 id="网络服务"><a href="#网络服务" class="headerlink" title="网络服务"></a>网络服务</h2><p>下图是网络服务经典设计, 每个handler都是在自己的单独线程中执行</p>
<p><img src="/flame/images/java/nio-network-service-classic-design.png" alt="Classic Network Service Designs"></p>
<p>从上图中可以看出, 网络服务中的任务可以划分为:</p>
<ul>
<li><p>Read request </p>
</li>
<li><p>Decode request </p>
</li>
<li><p>Process service </p>
</li>
<li><p>Encode reply </p>
</li>
<li><p>Send reply</p>
</li>
</ul>
<p>而在不同类型的网络服务中，任务的性质和成本是有区别，例如：解析XML、传送文件、生成web页面、纯计算任务等等</p>
<h3 id="C10K-C10M问题"><a href="#C10K-C10M问题" class="headerlink" title="C10K C10M问题"></a>C10K C10M问题</h3><p>见于 <a target="_blank" rel="noopener" href="http://www.kegel.com/c10k.html">C10K C10M的经典问题</a></p>
<h3 id="可扩展的目标"><a href="#可扩展的目标" class="headerlink" title="可扩展的目标"></a>可扩展的目标</h3><p>在网络服务中，我们会关注如下目标:</p>
<ul>
<li>负载持续增加时可以优雅的降级</li>
<li>能够通过增加系统硬件资源(CPU, memory, disk, bandwidth)，持续提升系统的处理能力</li>
<li>低延迟</li>
<li>能够满足峰值需要</li>
<li>可调优的服务质量</li>
</ul>
<p>而在实现可扩展的目标时，最优的策略一般是<strong>分而治之</strong></p>
<h3 id="设计策略-分而治之"><a href="#设计策略-分而治之" class="headerlink" title="设计策略:分而治之"></a>设计策略:分而治之</h3><ul>
<li><p>任务划分  </p>
<p>把任务划分为更小的任务进行处理，每个任务的执行都是<strong>非阻塞</strong>的</p>
</li>
<li><p>事件触发  </p>
<p>一个IO事件看作是任务执行的触发器</p>
</li>
<li><p>基本机制: java.nio的支持</p>
<p><strong>非阻塞</strong>的读和写 </p>
<p><strong>监听</strong>事件, 把事件<strong>分发</strong>给事件<strong>关联</strong>的任务</p>
</li>
<li><p>变化的可能  </p>
<p>基于事件驱动的模式</p>
</li>
</ul>
<h4 id="基于事件驱动的模式"><a href="#基于事件驱动的模式" class="headerlink" title="基于事件驱动的模式"></a>基于事件驱动的模式</h4><p>Usually more efficient than alternatives</p>
<ul>
<li><p>Fewer resources</p>
<p>Don’t usually need a thread per client</p>
</li>
<li><p>Less overhead</p>
<p>Less context switching, often less locking</p>
</li>
<li><p>But dispatching can be slower</p>
<p>Must manually bind actions to events</p>
</li>
</ul>
<p>Usually harder to program</p>
<ul>
<li><p>Must break up into simple non-blocking actions</p>
<p>Similar to GUI event-driven actions</p>
<p>Cannot eliminate all blocking: GC, page faults, etc</p>
</li>
<li><p>Must keep track of logical state of service</p>
</li>
</ul>
<h2 id="Reactor模式"><a href="#Reactor模式" class="headerlink" title="Reactor模式"></a>Reactor模式</h2><p>Reactor是基于事件驱动的模式，常用于网络编程</p>
<p>在Reactor Pattern中的作用划分</p>
<ul>
<li><p>Reactor </p>
<p>responds to IO events by dispatching the appropriate handler</p>
</li>
<li><p>Handlers </p>
<p>perform non-blocking actions</p>
</li>
<li><p>Manage </p>
<p>by binding handlers to events</p>
</li>
</ul>
<h3 id="Reactor论文"><a href="#Reactor论文" class="headerlink" title="Reactor论文"></a>Reactor论文</h3><p>论文详情:  <a target="_blank" rel="noopener" href="http://www.dre.vanderbilt.edu/~schmidt/PDF/reactor-siemens.pdf">An Object Behavioral Pattern for Demultiplexing and Dispatching Handles for Synchronous Events</a></p>
<p>Reactor论文的解决方案:</p>
<blockquote>
<p>Solution</p>
<p>Integrate the synchronous demultiplexing of events and the dispatching of their corresponding event handlers that process the events. In addition, decouple the applicationspecific dispatching and implementation of services from the general-purpose event demultiplexing and dispatching mechanisms. For each service the application offers, introduce a separate Event Handler that processes certain types of events. All Event Handlers implement the same interface. Event Handlers register with an Initiation Dispatcher, which uses a Synchronous Event Demultiplexer to wait for events to occur. When events occur, the Synchronous Event Demultiplexer notifies the Initiation Dispatcher, which synchronously calls back to the Event Handler associated with the event. The Event Handler then dispatches the event to the method that implements the requested service.</p>
</blockquote>
<p>下图是Reactor论文总结的基本结构</p>
<p><img src="/flame/images/java/reactor-pattern-structure.png" alt="Reactor论文总结的基本结构"></p>
<p>下图是Reactor论文总结的协作</p>
<p><img src="/flame/images/java/reactor-pattern-general-collaborations.png" alt="Reactor论文总结的协作"></p>
<h4 id="Reactor-Paper-Collaboration-Scenarios"><a href="#Reactor-Paper-Collaboration-Scenarios" class="headerlink" title="Reactor Paper Collaboration Scenarios"></a>Reactor Paper Collaboration Scenarios</h4><p>下图是Reactor论文的举例 : Client Connects to a Reactive Logging Server</p>
<p><img src="/flame/images/java/reactor-pattern-paper-collaboration-scenarios-one.png" alt="Scenarios: Client Connects to a Reactive Logging Server"></p>
<blockquote>
<p>This sequence of steps can be summarized as follows:</p>
<ol>
<li>The logging server (1) registers the Logging Acceptor with the Initiation Dispatcher to handle connection requests; </li>
<li>The logging server invokes the handle events method (2) of the Initiation Dispatcher; </li>
<li>The Initiation Dispatcher invokes the synchronous event demultiplexing select (3) operation to wait for connection requests or logging data to arrive; </li>
<li>A client connects (4) to the logging server; </li>
<li>The Logging Acceptor is notified by the Initiation Dispatcher (5) of the new connection request; </li>
<li>The Logging Acceptor accepts (6) the new connection;</li>
<li>The Logging Acceptor creates (7) a Logging Handler to service the new client; </li>
<li>Logging Handler registers (8) its socket handle with the Initiation Dispatcher and instructs the dispatcher to notify it when the socket becomes “ready for reading.”</li>
</ol>
</blockquote>
<p>下图是Reactor模式的举例：Client Sends Logging Record to a Reactive Logging Server</p>
<p><img src="/flame/images/java/reactor-pattern-paper-collaboration-scenarios-second.png" alt="Scenarios:Client Sends Logging Record to a Reactive Logging Server"></p>
<blockquote>
<p>The sequence of steps that the reactive logging server takes to service a logging record.</p>
<ol>
<li>The client sends (1) a logging record; </li>
<li>The Initiation Dispatcher notifies (2) the associated Logging Handler when a client logging record is queued on its socket handle by OS; </li>
<li>The record is received (3) in a non-blocking manner (steps 2 and 3 repeat until the logging record has been received completely); </li>
<li>The Logging Handler processes the logging record and writes (4) it to the standard output.</li>
<li>The Logging Handler returns (5) control to the Initiation Dispatcher’s event loop.</li>
</ol>
</blockquote>
<h3 id="Basic-version"><a href="#Basic-version" class="headerlink" title="Basic version"></a>Basic version</h3><p><img src="/flame/images/java/nio-reactor-single-thread-version.png" alt="Single thread version"></p>
<h3 id="Multithreaded-versions"><a href="#Multithreaded-versions" class="headerlink" title="Multithreaded versions"></a>Multithreaded versions</h3><p><img src="/flame/images/java/nio-reactor-worker-thread-pool-version.png" alt="Worker Thread Pools"></p>
<h3 id="Using-multiple-reactors"><a href="#Using-multiple-reactors" class="headerlink" title="Using multiple reactors"></a>Using multiple reactors</h3><p><img src="/flame/images/java/nio-reactor-multi-reactors-version.png" alt="Using Multiple Reactors"></p>
<h2 id="java-nio"><a href="#java-nio" class="headerlink" title="java nio"></a>java nio</h2><p><a target="_blank" rel="noopener" href="http://gee.cs.oswego.edu/dl/cpjslides/nio.pdf">Doug Lea : Scalable IO in Java</a></p>
<p>java-nio原理是基于非阻塞同步IO模型(见于<a href="/flame/2021/10/22/io-model/" title="&lt;strong&gt;I&#x2F;O模型&lt;&#x2F;strong&gt;"><strong>I/O模型</strong></a>)， 解决的是IO执行的性能问题。</p>
<p>java nio的特性主要分为四大类:</p>
<ul>
<li><p><strong>Channel</strong></p>
<p>Connections to files, sockets etc that support non-blocking reads</p>
</li>
<li><p><strong>Buffer</strong></p>
<p>Array-like objects that can be directly read or written by Channels </p>
</li>
<li><p><strong>Selector</strong></p>
<p>Tell which of a set of Channels have IO events </p>
</li>
<li><p><strong>SelectionKey</strong></p>
<p>Maintain IO event status and bindings</p>
</li>
</ul>
<h2 id="Api详情"><a href="#Api详情" class="headerlink" title="Api详情"></a>Api详情</h2><h3 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h3><p>Buffer   ByteBuffe  r (CharBuffer, LongBuffer, etc not shown)</p>
<p><img src="/flame/images/java/java-nio-buffer.png" alt="buffer的内部结构"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Buffer</span> &#123;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">capacity</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">position</span><span class="params">()</span>;</span><br><span class="line"> Buffer <span class="title function_">position</span><span class="params">(<span class="type">int</span> newPosition)</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">limit</span><span class="params">()</span>;</span><br><span class="line"> Buffer <span class="title function_">limit</span><span class="params">(<span class="type">int</span> newLimit)</span>;</span><br><span class="line"> Buffer <span class="title function_">mark</span><span class="params">()</span>;</span><br><span class="line"> Buffer <span class="title function_">reset</span><span class="params">()</span>;</span><br><span class="line"> Buffer <span class="title function_">clear</span><span class="params">()</span>;</span><br><span class="line"> Buffer <span class="title function_">flip</span><span class="params">()</span>;</span><br><span class="line"> Buffer <span class="title function_">rewind</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">remaining</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">hasRemaining</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isReadOnly</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ByteBuffer</span> <span class="keyword">extends</span> <span class="title class_">Buffer</span> &#123;</span><br><span class="line"> <span class="keyword">static</span> ByteBuffer <span class="title function_">allocateDirect</span><span class="params">(<span class="type">int</span> capacity)</span>;</span><br><span class="line"> <span class="keyword">static</span> ByteBuffer <span class="title function_">allocate</span><span class="params">(<span class="type">int</span> capacity)</span>;</span><br><span class="line"> <span class="keyword">static</span> ByteBuffer <span class="title function_">wrap</span><span class="params">(<span class="type">byte</span>[] src, <span class="type">int</span> offset, <span class="type">int</span> len)</span>;</span><br><span class="line"> <span class="keyword">static</span> ByteBuffer <span class="title function_">wrap</span><span class="params">(<span class="type">byte</span>[] src)</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isDirect</span><span class="params">()</span>;</span><br><span class="line"> ByteOrder <span class="title function_">order</span><span class="params">()</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">order</span><span class="params">(ByteOrder bo)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">slice</span><span class="params">()</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">duplicate</span><span class="params">()</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">compact</span><span class="params">()</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">asReadOnlyBuffer</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">byte</span> <span class="title function_">get</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">byte</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">get</span><span class="params">(<span class="type">byte</span>[] dst, <span class="type">int</span> offset, <span class="type">int</span> length)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">get</span><span class="params">(<span class="type">byte</span>[] dst)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">put</span><span class="params">(<span class="type">byte</span> b)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">put</span><span class="params">(<span class="type">int</span> index, <span class="type">byte</span> b)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">put</span><span class="params">(<span class="type">byte</span>[] src, <span class="type">int</span> offset, <span class="type">int</span> length)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">put</span><span class="params">(ByteBuffer src)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">put</span><span class="params">(<span class="type">byte</span>[] src)</span>;</span><br><span class="line"> <span class="type">char</span> <span class="title function_">getChar</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">char</span> <span class="title function_">getChar</span><span class="params">(<span class="type">int</span> index)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">putChar</span><span class="params">(<span class="type">char</span> value)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">putChar</span><span class="params">(<span class="type">int</span> index, <span class="type">char</span> value)</span>;</span><br><span class="line"> CharBuffer <span class="title function_">asCharBuffer</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">short</span> <span class="title function_">getShort</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">short</span> <span class="title function_">getShort</span><span class="params">(<span class="type">int</span> index)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">putShort</span><span class="params">(<span class="type">short</span> value)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">putShort</span><span class="params">(<span class="type">int</span> index, <span class="type">short</span> value)</span>;</span><br><span class="line"> ShortBuffer <span class="title function_">asShortBuffer</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">getInt</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">getInt</span><span class="params">(<span class="type">int</span> index)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">putInt</span><span class="params">(<span class="type">int</span> value)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">putInt</span><span class="params">(<span class="type">int</span> index, <span class="type">int</span> value)</span>;</span><br><span class="line"> IntBuffer <span class="title function_">asIntBuffer</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">long</span> <span class="title function_">getLong</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">long</span> <span class="title function_">getLong</span><span class="params">(<span class="type">int</span> index)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">putLong</span><span class="params">(<span class="type">long</span> value)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">putLong</span><span class="params">(<span class="type">int</span> index, <span class="type">long</span> value)</span>;</span><br><span class="line"> LongBuffer <span class="title function_">asLongBuffer</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">float</span> <span class="title function_">getFloat</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">float</span> <span class="title function_">getFloat</span><span class="params">(<span class="type">int</span> index)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">putFloat</span><span class="params">(<span class="type">float</span> value)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">putFloat</span><span class="params">(<span class="type">int</span> index, <span class="type">float</span> value)</span>;</span><br><span class="line"> FloatBuffer <span class="title function_">asFloatBuffer</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">double</span> <span class="title function_">getDouble</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">double</span> <span class="title function_">getDouble</span><span class="params">(<span class="type">int</span> index)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">putDouble</span><span class="params">(<span class="type">double</span> value)</span>;</span><br><span class="line"> ByteBuffer <span class="title function_">putDouble</span><span class="params">(<span class="type">int</span> index, <span class="type">double</span> value)</span>;</span><br><span class="line"> DoubleBuffer <span class="title function_">asDoubleBuffer</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Channel</span> &#123;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isOpen</span><span class="params">()</span>;</span><br><span class="line"> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ReadableByteChannel</span> <span class="keyword">extends</span> <span class="title class_">Channel</span> &#123;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">read</span><span class="params">(ByteBuffer dst)</span> <span class="keyword">throws</span> IOException;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">WritableByteChannel</span> <span class="keyword">extends</span> <span class="title class_">Channel</span> &#123;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">write</span><span class="params">(ByteBuffer src)</span> <span class="keyword">throws</span> IOException;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ScatteringByteChannel</span> <span class="keyword">extends</span> <span class="title class_">ReadableByteChannel</span> &#123;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">read</span><span class="params">(ByteBuffer[] dsts, <span class="type">int</span> offset, <span class="type">int</span> length)</span></span><br><span class="line"> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">read</span><span class="params">(ByteBuffer[] dsts)</span> <span class="keyword">throws</span> IOException;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">GatheringByteChannel</span> <span class="keyword">extends</span> <span class="title class_">WritableByteChannel</span> &#123;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">write</span><span class="params">(ByteBuffer[] srcs, <span class="type">int</span> offset, <span class="type">int</span> length)</span></span><br><span class="line"> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">write</span><span class="params">(ByteBuffer[] srcs)</span> <span class="keyword">throws</span> IOException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="SelectableChannel"><a href="#SelectableChannel" class="headerlink" title="SelectableChannel"></a>SelectableChannel</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">SelectableChannel</span> <span class="keyword">implements</span> <span class="title class_">Channel</span> &#123;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">validOps</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isRegistered</span><span class="params">()</span>;</span><br><span class="line"> SelectionKey <span class="title function_">keyFor</span><span class="params">(Selector sel)</span>;</span><br><span class="line"> SelectionKey <span class="title function_">register</span><span class="params">(Selector sel, <span class="type">int</span> ops)</span></span><br><span class="line"> <span class="keyword">throws</span> ClosedChannelException;</span><br><span class="line"> <span class="keyword">void</span> <span class="title function_">configureBlocking</span><span class="params">(<span class="type">boolean</span> block)</span></span><br><span class="line"> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isBlocking</span><span class="params">()</span>;</span><br><span class="line"> Object <span class="title function_">blockingLock</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="SocketChannel"><a href="#SocketChannel" class="headerlink" title="SocketChannel"></a>SocketChannel</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">SocketChannel</span> <span class="keyword">implements</span> <span class="title class_">ByteChannel</span> ... &#123;</span><br><span class="line"> <span class="keyword">static</span> SocketChannel <span class="title function_">open</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> Socket <span class="title function_">socket</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">validOps</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isConnectionPending</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isInputOpen</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isOutputOpen</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">connect</span><span class="params">(SocketAddress remote)</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">finishConnect</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="keyword">void</span> <span class="title function_">shutdownInput</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="keyword">void</span> <span class="title function_">shutdownOutput</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">read</span><span class="params">(ByteBuffer dst)</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">read</span><span class="params">(ByteBuffer[] dsts, <span class="type">int</span> offset, <span class="type">int</span> length)</span></span><br><span class="line"> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">read</span><span class="params">(ByteBuffer[] dsts)</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">write</span><span class="params">(ByteBuffer src)</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">write</span><span class="params">(ByteBuffer[] srcs, <span class="type">int</span> offset, <span class="type">int</span> length)</span></span><br><span class="line"> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">write</span><span class="params">(ByteBuffer[] srcs)</span> <span class="keyword">throws</span> IOException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="ServerSocketChannel"><a href="#ServerSocketChannel" class="headerlink" title="ServerSocketChannel"></a>ServerSocketChannel</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ServerSocketChannel</span> extends ... &#123;</span><br><span class="line"> <span class="keyword">static</span> ServerSocketChannel <span class="title function_">open</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">validOps</span><span class="params">()</span>;</span><br><span class="line"> ServerSocket <span class="title function_">socket</span><span class="params">()</span>;</span><br><span class="line"> SocketChannel <span class="title function_">accept</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="FileChannel"><a href="#FileChannel" class="headerlink" title="FileChannel"></a>FileChannel</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">FileChannel</span> implements ... &#123;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">read</span><span class="params">(ByteBuffer dst)</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">read</span><span class="params">(ByteBuffer dst, <span class="type">long</span> position)</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">read</span><span class="params">(ByteBuffer[] dsts, <span class="type">int</span> offset, <span class="type">int</span> length)</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">read</span><span class="params">(ByteBuffer[] dsts)</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">write</span><span class="params">(ByteBuffer src)</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">write</span><span class="params">(ByteBuffer src, <span class="type">long</span> position)</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">write</span><span class="params">(ByteBuffer[] srcs, <span class="type">int</span> offset, <span class="type">int</span> length)</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">write</span><span class="params">(ByteBuffer[] srcs)</span>;</span><br><span class="line"> <span class="type">long</span> <span class="title function_">position</span><span class="params">()</span>;</span><br><span class="line"> <span class="keyword">void</span> <span class="title function_">position</span><span class="params">(<span class="type">long</span> newPosition)</span>;</span><br><span class="line"> <span class="type">long</span> <span class="title function_">size</span><span class="params">()</span>;</span><br><span class="line"> <span class="keyword">void</span> <span class="title function_">truncate</span><span class="params">(<span class="type">long</span> size)</span>;</span><br><span class="line"> <span class="keyword">void</span> <span class="title function_">force</span><span class="params">(<span class="type">boolean</span> flushMetaDataToo)</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">transferTo</span><span class="params">(<span class="type">long</span> position, <span class="type">int</span> count,</span></span><br><span class="line"><span class="params"> WritableByteChannel dst)</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">transferFrom</span><span class="params">(ReadableByteChannel src,</span></span><br><span class="line"><span class="params"> <span class="type">long</span> position, <span class="type">int</span> count)</span>;</span><br><span class="line"> FileLock <span class="title function_">lock</span><span class="params">(<span class="type">long</span> position, <span class="type">long</span> size, <span class="type">boolean</span> shared)</span>;</span><br><span class="line"> FileLock <span class="title function_">lock</span><span class="params">()</span>;</span><br><span class="line"> FileLock <span class="title function_">tryLock</span><span class="params">(<span class="type">long</span> pos, <span class="type">long</span> size, <span class="type">boolean</span> shared)</span>;</span><br><span class="line"> FileLock <span class="title function_">tryLock</span><span class="params">()</span>;</span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> MAP_RO, MAP_RW, MAP_COW;</span><br><span class="line"> MappedByteBuffer <span class="title function_">map</span><span class="params">(<span class="type">int</span> mode, <span class="type">long</span> position, <span class="type">int</span> size)</span>;</span><br><span class="line">&#125;</span><br><span class="line">NOTE: ALL methods <span class="keyword">throw</span> IOException</span><br></pre></td></tr></table></figure>



<h3 id="Selector"><a href="#Selector" class="headerlink" title="Selector"></a>Selector</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Selector</span> &#123;</span><br><span class="line"> <span class="keyword">static</span> Selector <span class="title function_">open</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> Set <span class="title function_">keys</span><span class="params">()</span>;</span><br><span class="line"> Set <span class="title function_">selectedKeys</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">selectNow</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">select</span><span class="params">(<span class="type">long</span> timeout)</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">select</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line"> <span class="keyword">void</span> <span class="title function_">wakeup</span><span class="params">()</span>;</span><br><span class="line"> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span> <span class="keyword">throws</span> IOException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h3 id="SelectionKey"><a href="#SelectionKey" class="headerlink" title="SelectionKey"></a>SelectionKey</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">SelectionKey</span> &#123;</span><br><span class="line"> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> OP_READ, OP_WRITE,</span><br><span class="line"> OP_CONNECT, OP_ACCEPT;</span><br><span class="line"> SelectableChannel <span class="title function_">channel</span><span class="params">()</span>;</span><br><span class="line"> Selector <span class="title function_">selector</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">()</span>;</span><br><span class="line"> <span class="keyword">void</span> <span class="title function_">cancel</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">interestOps</span><span class="params">()</span>;</span><br><span class="line"> <span class="keyword">void</span> <span class="title function_">interestOps</span><span class="params">(<span class="type">int</span> ops)</span>;</span><br><span class="line"> <span class="type">int</span> <span class="title function_">readyOps</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isReadable</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isWritable</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isConnectable</span><span class="params">()</span>;</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">isAcceptable</span><span class="params">()</span>;</span><br><span class="line"> Object <span class="title function_">attach</span><span class="params">(Object ob)</span>;</span><br><span class="line"> Object <span class="title function_">attachment</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="代码样例"><a href="#代码样例" class="headerlink" title="代码样例"></a>代码样例</h2><p>Client发送Ping, Server响应Pong</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/flame/tags/nio/" rel="tag"># nio</a>
              <a href="/flame/tags/java/" rel="tag"># java</a>
              <a href="/flame/tags/socket/" rel="tag"># socket</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/flame/2021/10/22/networks/networks-tcp/" rel="prev" title="TCP">
      <i class="fa fa-chevron-left"></i> TCP
    </a></div>
      <div class="post-nav-item">
    <a href="/flame/2021/10/30/java/java-middleware/netty/java-middleware-netty-components/" rel="next" title="网络编程框架-Netty组件">
      网络编程框架-Netty组件 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#NIO-%E6%96%B0%E7%9A%84%E8%BF%98%E6%98%AF%E9%9D%9E%E9%98%BB%E5%A1%9E%E7%9A%84"><span class="nav-number">2.</span> <span class="nav-text">NIO-新的还是非阻塞的</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1"><span class="nav-number">3.</span> <span class="nav-text">网络服务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#C10K-C10M%E9%97%AE%E9%A2%98"><span class="nav-number">3.1.</span> <span class="nav-text">C10K C10M问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E6%89%A9%E5%B1%95%E7%9A%84%E7%9B%AE%E6%A0%87"><span class="nav-number">3.2.</span> <span class="nav-text">可扩展的目标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E8%AE%A1%E7%AD%96%E7%95%A5-%E5%88%86%E8%80%8C%E6%B2%BB%E4%B9%8B"><span class="nav-number">3.3.</span> <span class="nav-text">设计策略:分而治之</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E7%9A%84%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.3.1.</span> <span class="nav-text">基于事件驱动的模式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reactor%E6%A8%A1%E5%BC%8F"><span class="nav-number">4.</span> <span class="nav-text">Reactor模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Reactor%E8%AE%BA%E6%96%87"><span class="nav-number">4.1.</span> <span class="nav-text">Reactor论文</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Reactor-Paper-Collaboration-Scenarios"><span class="nav-number">4.1.1.</span> <span class="nav-text">Reactor Paper Collaboration Scenarios</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Basic-version"><span class="nav-number">4.2.</span> <span class="nav-text">Basic version</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Multithreaded-versions"><span class="nav-number">4.3.</span> <span class="nav-text">Multithreaded versions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-multiple-reactors"><span class="nav-number">4.4.</span> <span class="nav-text">Using multiple reactors</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#java-nio"><span class="nav-number">5.</span> <span class="nav-text">java nio</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Api%E8%AF%A6%E6%83%85"><span class="nav-number">6.</span> <span class="nav-text">Api详情</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Buffer"><span class="nav-number">6.1.</span> <span class="nav-text">Buffer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Channel"><span class="nav-number">6.2.</span> <span class="nav-text">Channel</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SelectableChannel"><span class="nav-number">6.2.1.</span> <span class="nav-text">SelectableChannel</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SocketChannel"><span class="nav-number">6.2.2.</span> <span class="nav-text">SocketChannel</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ServerSocketChannel"><span class="nav-number">6.2.3.</span> <span class="nav-text">ServerSocketChannel</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#FileChannel"><span class="nav-number">6.2.4.</span> <span class="nav-text">FileChannel</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Selector"><span class="nav-number">6.3.</span> <span class="nav-text">Selector</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SelectionKey"><span class="nav-number">6.4.</span> <span class="nav-text">SelectionKey</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E6%A0%B7%E4%BE%8B"><span class="nav-number">7.</span> <span class="nav-text">代码样例</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="flame"
      src="/flame/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">flame</p>
  <div class="site-description" itemprop="description">读书百遍 其义自见</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/flame/archives/">
        
          <span class="site-state-item-count">22</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/flame/categories/">
          
        <span class="site-state-item-count">36</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/flame/tags/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

      
      <!--网易云音乐插件-->
      <!-- require APlayer -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
      <script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
      <!-- require MetingJS-->
      <script src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script>
      <!--网易云playlist外链地址-->
      <div style="margin-top: 20px;">
        <meting-js
            server="netease"
            type="playlist"
            id="427009153"
            mini="false"
            fixed="false"
            list-folded="true"
            autoplay="false"
            volume="0.4"
            theme="#FADFA3"
            order="list"
            loop="all"
            preload="auto"
            mutex="true">
        </meting-js>
      </div>

    </div>



  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">flame</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">150k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:16</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/flame/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script>
  <script src="/flame/lib/velocity/velocity.min.js"></script>
  <script src="/flame/lib/velocity/velocity.ui.min.js"></script>

<script src="/flame/js/utils.js"></script>

<script src="/flame/js/motion.js"></script>


<script src="/flame/js/schemes/pisces.js"></script>


<script src="/flame/js/next-boot.js"></script>

<script src="/flame/js/bookmark.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/flame/js/local-search.js"></script>











<script data-pjax>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'default',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


    <div id="pjax">
  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'ea4dd98148ad4427dc12',
      clientSecret: '6b19239ab40d57eb79685e3e48fd6f0e54bc3b03',
      repo        : 'flame',
      owner       : 'flame-bcc',
      admin       : ['agui93'],
      id          : 'be9c956941c6a0f2ef75db23bc457967',
        language: 'zh-CN',
      distractionFreeMode: false
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

    </div>
</body>
</html>
